var A=Object.defineProperty,O=Object.defineProperties;var Y=Object.getOwnPropertyDescriptors;var x=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,j=Object.prototype.propertyIsEnumerable;var U=(e,t,n)=>t in e?A(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))M.call(t,n)&&U(e,n,t[n]);if(x)for(var n of x(t))j.call(t,n)&&U(e,n,t[n]);return e},L=(e,t)=>O(e,Y(t));import{a as q,r as c,o as u,c as N,w as s,b as l,t as h,d as a,e as b,f as w,F as g,g as R,p as J,h as K,i as f,j as T,E as C,k as z}from"./vendor.b634d416.js";const $=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))v(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const d of i.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&v(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function v(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};$();const G=0,I=q.create({baseUrl:"//software.myhexin.com/yapi/mock/9244/",timeout:3e3});I.interceptors.request.use(e=>(e.url=e.baseUrl+e.url,e),e=>Promise.reject(e));I.interceptors.response.use(e=>G===e.data.code?e.data.data:Promise.reject(e.data.code),e=>Promise.reject(e));const H=()=>I({method:"get",url:"weeks"}),Q=e=>I({method:"get",url:"reportList",params:{date:e}}),X=e=>I({method:"post",url:"report/add",data:e}),Z=e=>I({method:"post",url:"report/edit",data:e}),ee=e=>I({method:"delete",url:"report/delete",data:{id:e}});var S=(e,t)=>{const n=e.__vccOpts||e;for(const[v,o]of t)n[v]=o;return n};const te={props:{reportId:{type:Number,default:void 0},name:{type:String,default:""},planNumber:{type:String,default:"0"},realNumber:{type:String,default:"0"},deployNumber:{type:String,default:"0"},bugNumber:{type:String,default:"0"},onlineNumber:{type:String,default:"0"},solveNumber:{type:String,default:"0"},worksInPlan:{type:Array,default:[]},worksNotInPlan:{type:Array,default:[]},worksInNextWeek:{type:Array,default:[]},tips:{type:String,default:""}},emits:["edit","refresh"],methods:{async confirmEvent(){const e=this.$loading();try{await ee(this.reportId),this.$message({type:"success",message:"\u5220\u9664\u6210\u529F"}),this.$emit("refresh")}catch(t){this.$message({type:"error",message:t}),console.error(t)}finally{e.close()}}}},W=e=>(J("data-v-39f5e598"),e=e(),K(),e),oe={class:"name"},ne=W(()=>l("h3",null,"\u672C\u5468\u4EFB\u52A1\u603B\u89C8",-1)),le={class:"row"},se={class:"col"},re={class:"col"},ie={class:"col"},ae=W(()=>l("h3",null,"\u672C\u5468\u8FC7\u7A0B\u6570\u636E",-1)),ue={class:"row"},de={class:"col"},pe={class:"col"},ce={class:"col"},me=W(()=>l("h3",null,"\u672C\u5468\u6392\u671F\u5DE5\u4F5C",-1)),_e=W(()=>l("h3",null,"\u672C\u5468\u6392\u671F\u5916\u5DE5\u4F5C",-1)),he=W(()=>l("h3",null,"\u4E0B\u5468\u8BA1\u5212",-1)),ke={key:0};function be(e,t,n,v,o,i){const d=c("edit"),k=c("el-icon"),V=c("delete"),r=c("el-popconfirm"),m=c("el-card");return n.name?(u(),N(m,{key:0,id:n.name},{default:s(()=>[l("h2",null,[l("span",oe,h(n.name),1),a(k,{onClick:t[0]||(t[0]=_=>e.$emit("edit"))},{default:s(()=>[a(d)]),_:1}),a(r,{class:"el-popconfirm","confirm-button-text":"OK","cancel-button-text":"No, Thanks","icon-color":"red",title:"Are you sure to delete this?",onConfirm:i.confirmEvent},{reference:s(()=>[a(k,{color:"#ff0012"},{default:s(()=>[a(V)]),_:1})]),_:1},8,["onConfirm"])]),ne,l("div",le,[l("div",se,"\u8BA1\u5212\u5B8C\u6210\u4EFB\u52A1\u6570\uFF1A"+h(n.planNumber),1),l("div",re,"\u5B9E\u9645\u5B8C\u6210\u4EFB\u52A1\u6570\uFF1A"+h(n.realNumber),1),l("div",ie,"\u53D1\u5E03\u4EFB\u52A1\u6570\uFF1A"+h(n.deployNumber),1)]),ae,l("div",ue,[l("div",de,"Bug\u6570\uFF1A"+h(n.bugNumber),1),l("div",pe,"\u7EBF\u4E0A\u95EE\u9898\u6570\uFF1A"+h(n.onlineNumber),1),l("div",ce,"\u53D1\u73B0\u95EE\u9898\u5E76\u5B9A\u4F4D\u539F\u56E0\u95EE\u9898\u6570\uFF1A"+h(n.solveNumber),1)]),me,(u(!0),b(g,null,w(n.worksInPlan,(_,y)=>(u(),b("p",{key:y},h(`${y+1}. ${_}`),1))),128)),_e,(u(!0),b(g,null,w(n.worksNotInPlan,(_,y)=>(u(),b("p",{key:y},h(`${y+1}. ${_}`),1))),128)),he,(u(!0),b(g,null,w(n.worksInNextWeek,(_,y)=>(u(),b("p",{key:y},h(`${y+1}. ${_}`),1))),128)),n.tips?(u(),b("h3",ke,"\u5907\u6CE8")):R("",!0),l("p",null,h(n.tips),1)]),_:1},8,["id"])):R("",!0)}var fe=S(te,[["render",be],["__scopeId","data-v-39f5e598"]]);const ye={props:{week:{type:String,default:""}},emits:["refresh"],data(){return{loading:!1,visible:!1,isNew:!0,id:void 0,name:"",planNumber:"",realNumber:"",deployNumber:"",bugNumber:"",onlineNumber:"",solveNumber:"",worksInPlan:[""],worksNotInPlan:[""],worksInNextWeek:[""],tips:""}},methods:{createReport(){this.isNew=!0,this.id=void 0,this.name="",this.planNumber="",this.realNumber="",this.deployNumber="",this.bugNumber="",this.onlineNumber="",this.solveNumber="",this.worksInPlan=[""],this.worksNotInPlan=[""],this.worksInNextWeek=[""],this.tips="",this.visible=!0},editReport(e){this.isNew=!1,this.id=e.id,this.name=e.name,this.planNumber=e.planNumber,this.realNumber=e.realNumber,this.deployNumber=e.deployNumber,this.bugNumber=e.bugNumber,this.onlineNumber=e.onlineNumber,this.solveNumber=e.solveNumber,this.worksInPlan=e.worksInPlan,this.worksNotInPlan=e.worksNotInPlan,this.worksInNextWeek=e.worksInNextWeek,this.tips=e.tips,this.visible=!0},createWorks(e){this[e].push("")},inputWorks(e,t,n){this[t][n]=e},deleteWorks(e,t){this[e].splice(t,1)},async handleSubmit(){let e={id:this.id,name:this.name,planNumber:this.planNumber,realNumber:this.realNumber,deployNumber:this.deployNumber,bugNumber:this.bugNumber,onlineNumber:this.onlineNumber,solveNumber:this.solveNumber,worksInPlan:this.worksInPlan,worksNotInPlan:this.worksNotInPlan,worksInNextWeek:this.worksInNextWeek,tips:this.tips};this.loading=!0;try{this.isNew?(e=L(B({},e),{week:this.week}),await X(e)):await Z(e),this.visible=!1,this.$emit("refresh")}catch(t){this.$message({type:"error",message:t}),console.error(t)}finally{this.loading=!1}}}},Ne=l("h3",null,"\u672C\u5468\u4EFB\u52A1\u603B\u89C8",-1),we={class:"row"},ge={class:"col"},ve=l("span",null,"\u8BA1\u5212\u5B8C\u6210\u4EFB\u52A1\u6570\uFF1A",-1),Ie={class:"col"},Ve=l("span",null,"\u5B9E\u9645\u5B8C\u6210\u4EFB\u52A1\u6570\uFF1A",-1),We={class:"col"},Pe=l("span",null,"\u53D1\u5E03\u4EFB\u52A1\u6570\uFF1A",-1),Re=l("h3",null,"\u672C\u5468\u8FC7\u7A0B\u6570\u636E",-1),Ce={class:"row"},Se={class:"col"},xe=l("span",null,"Bug\u6570\uFF1A",-1),Ue={class:"col"},Be=l("span",null,"\u7EBF\u4E0A\u95EE\u9898\u6570\uFF1A",-1),Le={class:"col"},De=l("span",null,"\u53D1\u73B0\u95EE\u9898\u5E76\u5B9A\u4F4D\u539F\u56E0\u95EE\u9898\u6570\uFF1A",-1),Fe=l("h3",null,"\u672C\u5468\u6392\u671F\u5DE5\u4F5C",-1),Ee=f("\u5220\u9664"),Ae=f("\u65B0\u589E"),Oe=l("h3",null,"\u672C\u5468\u6392\u671F\u5916\u5DE5\u4F5C",-1),Ye=f("\u5220\u9664"),Me=f("\u65B0\u589E"),je=l("h3",null,"\u4E0B\u5468\u8BA1\u5212",-1),qe=f("\u5220\u9664"),Je=f("\u65B0\u589E"),Ke=l("h3",null,"\u5907\u6CE8",-1),Te=f("\u53D6\u6D88"),ze=f("\u786E\u8BA4");function $e(e,t,n,v,o,i){const d=c("el-input"),k=c("el-button"),V=c("el-dialog");return u(),N(V,{modelValue:o.visible,"onUpdate:modelValue":t[12]||(t[12]=r=>o.visible=r),title:o.isNew?"\u65B0\u5EFA\u5468\u62A5":"\u7F16\u8F91\u5468\u62A5",fullscreen:""},{footer:s(()=>[a(k,{plain:"",onClick:t[11]||(t[11]=r=>o.visible=!1)},{default:s(()=>[Te]),_:1}),a(k,{type:"primary",loading:o.loading,onClick:i.handleSubmit},{default:s(()=>[ze]),_:1},8,["loading","onClick"])]),default:s(()=>[a(d,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=r=>o.name=r),placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u540D\u5B57"},null,8,["modelValue"]),Ne,l("div",we,[l("div",ge,[a(d,{modelValue:o.planNumber,"onUpdate:modelValue":t[1]||(t[1]=r=>o.planNumber=r),type:"number"},{prepend:s(()=>[ve]),_:1},8,["modelValue"])]),l("div",Ie,[a(d,{modelValue:o.realNumber,"onUpdate:modelValue":t[2]||(t[2]=r=>o.realNumber=r),type:"number"},{prepend:s(()=>[Ve]),_:1},8,["modelValue"])]),l("div",We,[a(d,{modelValue:o.deployNumber,"onUpdate:modelValue":t[3]||(t[3]=r=>o.deployNumber=r),type:"number"},{prepend:s(()=>[Pe]),_:1},8,["modelValue"])])]),Re,l("div",Ce,[l("div",Se,[a(d,{modelValue:o.bugNumber,"onUpdate:modelValue":t[4]||(t[4]=r=>o.bugNumber=r),type:"number"},{prepend:s(()=>[xe]),_:1},8,["modelValue"])]),l("div",Ue,[a(d,{modelValue:o.onlineNumber,"onUpdate:modelValue":t[5]||(t[5]=r=>o.onlineNumber=r),type:"number"},{prepend:s(()=>[Be]),_:1},8,["modelValue"])]),l("div",Le,[a(d,{modelValue:o.solveNumber,"onUpdate:modelValue":t[6]||(t[6]=r=>o.solveNumber=r),type:"number"},{prepend:s(()=>[De]),_:1},8,["modelValue"])])]),Fe,(u(!0),b(g,null,w(o.worksInPlan,(r,m)=>(u(),N(d,{class:"work-input",key:m,modelValue:r,onInput:_=>i.inputWorks(_,"worksInPlan",m)},{prepend:s(()=>[f(h(m+1),1)]),append:s(()=>[a(k,{type:"danger",onClick:_=>i.deleteWorks("worksInPlan",m)},{default:s(()=>[Ee]),_:2},1032,["onClick"])]),_:2},1032,["modelValue","onInput"]))),128)),a(k,{type:"primary",onClick:t[7]||(t[7]=r=>i.createWorks("worksInPlan"))},{default:s(()=>[Ae]),_:1}),Oe,(u(!0),b(g,null,w(o.worksNotInPlan,(r,m)=>(u(),N(d,{class:"work-input",key:m,modelValue:r,onInput:_=>i.inputWorks(_,"worksNotInPlan",m)},{prepend:s(()=>[f(h(m+1),1)]),append:s(()=>[a(k,{type:"danger"},{default:s(()=>[Ye]),_:1})]),_:2},1032,["modelValue","onInput"]))),128)),a(k,{type:"primary",onClick:t[8]||(t[8]=r=>i.createWorks("worksNotInPlan"))},{default:s(()=>[Me]),_:1}),je,(u(!0),b(g,null,w(o.worksInNextWeek,(r,m)=>(u(),N(d,{class:"work-input",key:m,modelValue:r,onInput:_=>i.inputWorks(_,"worksInNextWeek",m)},{prepend:s(()=>[f(h(m+1),1)]),append:s(()=>[a(k,{type:"danger"},{default:s(()=>[qe]),_:1})]),_:2},1032,["modelValue","onInput"]))),128)),a(k,{type:"primary",onClick:t[9]||(t[9]=r=>i.createWorks("worksInNextWeek"))},{default:s(()=>[Je]),_:1}),Ke,a(d,{type:"textarea",modelValue:o.tips,"onUpdate:modelValue":t[10]||(t[10]=r=>o.tips=r)},null,8,["modelValue"])]),_:1},8,["modelValue","title"])}var Ge=S(ye,[["render",$e]]);const He={components:{CardInfo:fe,WeeklyReport:Ge},data(){return{loading:null,laodingFlag:!0,week:"",weekList:[],list:[]}},created(){this.getWeeklyDate()},methods:{async getWeeklyDate(){this.loading=this.$loading(),this.loadingFlag=!0;try{const e=await H()||[];e.sort((t,n)=>new Date(n)-new Date(t)),this.weekList=e,this.week=this.weekList.length?this.weekList[0]:"",this.week&&this.getReportByWeek()}catch(e){this.loading.close(),this.loadingFlag=!1,this.$message({type:"error",message:e}),console.error(e)}},async getReportByWeek(){this.loadingFlag||(this.loading=this.$loading(),this.loadingFlag=!0);try{const e=await Q(this.week)||[];this.list=e}catch(e){this.list=[],this.$message({type:"error",message:e}),console.error(e)}finally{this.loading.close(),this.loadingFlag=!1}},createReport(){this.$refs.weeklyReport.createReport()},editReport(e){this.$refs.weeklyReport.editReport(JSON.parse(JSON.stringify(e)))}}},Qe=f("\u65B0\u5EFA\u5468\u62A5");function Xe(e,t,n,v,o,i){const d=c("el-date-picker"),k=c("el-button"),V=c("el-aside"),r=c("el-empty"),m=c("card-info"),_=c("el-main"),y=c("el-link"),F=c("weekly-report"),E=c("el-container");return u(),N(E,null,{default:s(()=>[a(V,{class:"scrollbar buttons",width:"240px"},{default:s(()=>[a(d,{modelValue:o.week,"onUpdate:modelValue":t[0]||(t[0]=p=>o.week=p),type:"week",format:"YYYY/MM/DD [\u7B2C]ww[\u5468]","value-format":"YYYY/MM/DD",placeholder:"Pick a week",clearable:!1,onChange:i.getReportByWeek},null,8,["modelValue","onChange"]),a(k,{plain:"",onClick:i.createReport,disabled:!o.week},{default:s(()=>[Qe]),_:1},8,["onClick","disabled"])]),_:1}),a(_,{class:"scrollbar"},{default:s(()=>[!o.list.length&&!e.loadingFlag?(u(),N(r,{key:0,description:"\u6682\u65E0\u6570\u636E"})):R("",!0),(u(!0),b(g,null,w(o.list,(p,P)=>(u(),N(m,{key:P,"report-id":p.id,name:p.name,"plan-number":p.planNumber,"real-number":p.realNumber,"deploy-number":p.deployNumber,"bug-number":p.bugNumber,"online-number":p.onlineNumber,"solve-number":p.solveNumber,"works-in-plan":p.worksInPlan,"works-not-in-plan":p.worksNotInPlan,"works-in-next-week":p.worksInNextWeek,tips:p.tips,onEdit:et=>i.editReport(p),onRefresh:i.getReportByWeek},null,8,["report-id","name","plan-number","real-number","deploy-number","bug-number","online-number","solve-number","works-in-plan","works-not-in-plan","works-in-next-week","tips","onEdit","onRefresh"]))),128))]),_:1}),a(V,{class:"scrollbar",width:"150px"},{default:s(()=>[(u(!0),b(g,null,w(o.list,(p,P)=>(u(),b("div",{key:P,class:"link"},[a(y,{type:"default",underline:!1,href:`#${p.name}`},{default:s(()=>[f(h(p.name),1)]),_:2},1032,["href"])]))),128))]),_:1}),a(F,{ref:"weeklyReport",week:o.week,onRefresh:i.getReportByWeek},null,8,["week","onRefresh"])]),_:1})}var Ze=S(He,[["render",Xe],["__scopeId","data-v-4f24a3f6"]]);const D=T(Ze);for(const e in C)if(Reflect.has(C,e)){const t=C[e];D.component(e,t)}D.use(z).mount("#app");
