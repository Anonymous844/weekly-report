var T=Object.defineProperty,E=Object.defineProperties;var H=Object.getOwnPropertyDescriptors;var R=Object.getOwnPropertySymbols;var O=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var S=(e,t,l)=>t in e?T(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,W=(e,t)=>{for(var l in t||(t={}))O.call(t,l)&&S(e,l,t[l]);if(R)for(var l of R(t))Y.call(t,l)&&S(e,l,t[l]);return e},L=(e,t)=>E(e,H(t));import{a as j,r as p,o as c,c as k,w as a,b as o,t as m,d as r,e as g,f as I,p as A,g as q,h as y,i as C,F as U,j as J,E as V,k as K}from"./vendor.520ecf15.js";const z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))_(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&_(u)}).observe(document,{childList:!0,subtree:!0});function l(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function _(n){if(n.ep)return;n.ep=!0;const i=l(n);fetch(n.href,i)}};z();const G=0,b=j.create({baseUrl:"//yapi.smart-xwork.cn/mock/147588/weekly-report/",timeout:3e3});b.interceptors.request.use(e=>(e.url=e.baseUrl+e.url,e),e=>Promise.reject(e));b.interceptors.response.use(e=>G===e.data.code?e.data.data:Promise.reject(e.data.code),e=>Promise.reject(e));const Q=()=>b({method:"get",url:"weeks"}),X=e=>b({method:"get",url:"reportList",params:{date:e}}),Z=e=>b({method:"post",url:"report/add",data:e}),$=e=>b({method:"post",url:"report/edit",data:e}),ee=e=>b({method:"delete",url:"report/delete",data:{id:e}});var x=(e,t)=>{const l=e.__vccOpts||e;for(const[_,n]of t)l[_]=n;return l};const te={props:{reportId:{type:Number,default:void 0},name:{type:String,default:""},planNumber:{type:String,default:"0"},realNumber:{type:String,default:"0"},deployNumber:{type:String,default:"0"},bugNumber:{type:String,default:"0"},onlineNumber:{type:String,default:"0"},solveNumber:{type:String,default:"0"},worksInPlan:{type:String,default:""},worksNotInPlan:{type:String,default:""},worksInNextWeek:{type:String,default:""},tips:{type:String,default:""}},emits:["edit","refresh"],methods:{async confirmEvent(){const e=this.$loading();try{await ee(this.reportId),this.$message({type:"success",message:"\u5220\u9664\u6210\u529F"}),this.$emit("refresh")}catch(t){this.$message({type:"error",message:t}),console.error(t)}finally{e.close()}}}},N=e=>(A("data-v-c2434482"),e=e(),q(),e),ne={class:"name"},oe=N(()=>o("h3",null,"\u672C\u5468\u4EFB\u52A1\u603B\u89C8",-1)),le={class:"row"},se={class:"col"},re={class:"col"},ie={class:"col"},ae=N(()=>o("h3",null,"\u672C\u5468\u8FC7\u7A0B\u6570\u636E",-1)),ue={class:"row"},de={class:"col"},pe={class:"col"},ce={class:"col"},me=N(()=>o("h3",null,"\u672C\u5468\u6392\u671F\u5DE5\u4F5C",-1)),_e=["innerHTML"],he=N(()=>o("h3",null,"\u672C\u5468\u6392\u671F\u5916\u5DE5\u4F5C",-1)),be=["innerHTML"],fe=N(()=>o("h3",null,"\u4E0B\u5468\u8BA1\u5212",-1)),ke=["innerHTML"],Ne={key:0},ge=["innerHTML"];function ye(e,t,l,_,n,i){const u=p("edit"),h=p("el-icon"),f=p("delete"),s=p("el-popconfirm"),w=p("el-card");return l.name?(c(),k(w,{key:0,id:l.name},{default:a(()=>[o("h2",null,[o("span",ne,m(l.name),1),r(h,{onClick:t[0]||(t[0]=P=>e.$emit("edit"))},{default:a(()=>[r(u)]),_:1}),r(s,{class:"el-popconfirm","confirm-button-text":"OK","cancel-button-text":"No, Thanks","icon-color":"red",title:"Are you sure to delete this?",onConfirm:i.confirmEvent},{reference:a(()=>[r(h,{color:"#ff0012"},{default:a(()=>[r(f)]),_:1})]),_:1},8,["onConfirm"])]),oe,o("div",le,[o("div",se,"\u8BA1\u5212\u5B8C\u6210\u4EFB\u52A1\u6570\uFF1A"+m(l.planNumber),1),o("div",re,"\u5B9E\u9645\u5B8C\u6210\u4EFB\u52A1\u6570\uFF1A"+m(l.realNumber),1),o("div",ie,"\u53D1\u5E03\u4EFB\u52A1\u6570\uFF1A"+m(l.deployNumber),1)]),ae,o("div",ue,[o("div",de,"Bug\u6570\uFF1A"+m(l.bugNumber),1),o("div",pe,"\u7EBF\u4E0A\u95EE\u9898\u6570\uFF1A"+m(l.onlineNumber),1),o("div",ce,"\u53D1\u73B0\u95EE\u9898\u5E76\u5B9A\u4F4D\u539F\u56E0\u95EE\u9898\u6570\uFF1A"+m(l.solveNumber),1)]),me,o("p",{innerHTML:l.worksInPlan.replace(/\n/g,"<br />")},null,8,_e),he,o("p",{innerHTML:l.worksNotInPlan.replace(/\n/g,"<br />")},null,8,be),fe,o("p",{innerHTML:l.worksInNextWeek.replace(/\n/g,"<br />")},null,8,ke),l.tips?(c(),g("h3",Ne,"\u5907\u6CE8")):I("",!0),o("p",{innerHTML:l.tips.replace(/\n/g,"<br />")},null,8,ge)]),_:1},8,["id"])):I("",!0)}var we=x(te,[["render",ye],["__scopeId","data-v-c2434482"]]);const ve={props:{week:{type:String,default:""}},emits:["refresh"],data(){return{loading:!1,visible:!1,isNew:!0,id:void 0,name:"",planNumber:"",realNumber:"",deployNumber:"",bugNumber:"",onlineNumber:"",solveNumber:"",worksInPlan:"",worksNotInPlan:"",worksInNextWeek:"",tips:""}},methods:{createReport(){this.isNew=!0,this.id=void 0,this.name="",this.planNumber="0",this.realNumber="0",this.deployNumber="0",this.bugNumber="0",this.onlineNumber="0",this.solveNumber="0",this.worksInPlan="",this.worksNotInPlan="",this.worksInNextWeek="",this.tips="",this.visible=!0},editReport(e){this.isNew=!1,this.id=e.id,this.name=e.name,this.planNumber=e.planNumber,this.realNumber=e.realNumber,this.deployNumber=e.deployNumber,this.bugNumber=e.bugNumber,this.onlineNumber=e.onlineNumber,this.solveNumber=e.solveNumber,this.worksInPlan=e.worksInPlan,this.worksNotInPlan=e.worksNotInPlan,this.worksInNextWeek=e.worksInNextWeek,this.tips=e.tips,this.visible=!0},async handleSubmit(){let e={id:this.id,name:this.name,planNumber:this.planNumber,realNumber:this.realNumber,deployNumber:this.deployNumber,bugNumber:this.bugNumber,onlineNumber:this.onlineNumber,solveNumber:this.solveNumber,worksInPlan:this.worksInPlan,worksNotInPlan:this.worksNotInPlan,worksInNextWeek:this.worksInNextWeek,tips:this.tips};this.loading=!0;try{this.isNew?(e=L(W({},e),{week:this.week}),await Z(e)):await $(e),this.visible=!1,this.$emit("refresh")}catch(t){this.$message({type:"error",message:t}),console.error(t)}finally{this.loading=!1}}}},Ie=o("h3",null,"\u672C\u5468\u4EFB\u52A1\u603B\u89C8",-1),Ve={class:"row"},xe={class:"col"},Pe=o("span",null,"\u8BA1\u5212\u5B8C\u6210\u4EFB\u52A1\u6570\uFF1A",-1),Re={class:"col"},Se=o("span",null,"\u5B9E\u9645\u5B8C\u6210\u4EFB\u52A1\u6570\uFF1A",-1),We={class:"col"},Le=o("span",null,"\u53D1\u5E03\u4EFB\u52A1\u6570\uFF1A",-1),Ce=o("h3",null,"\u672C\u5468\u8FC7\u7A0B\u6570\u636E",-1),Ue={class:"row"},Me={class:"col"},Be=o("span",null,"Bug\u6570\uFF1A",-1),De={class:"col"},Fe=o("span",null,"\u7EBF\u4E0A\u95EE\u9898\u6570\uFF1A",-1),Te={class:"col"},Ee=o("span",null,"\u53D1\u73B0\u95EE\u9898\u5E76\u5B9A\u4F4D\u539F\u56E0\u95EE\u9898\u6570\uFF1A",-1),He=o("h3",null,"\u672C\u5468\u6392\u671F\u5DE5\u4F5C",-1),Oe=o("h3",null,"\u672C\u5468\u6392\u671F\u5916\u5DE5\u4F5C",-1),Ye=o("h3",null,"\u4E0B\u5468\u8BA1\u5212",-1),je=o("h3",null,"\u5907\u6CE8",-1),Ae=y("\u53D6\u6D88"),qe=y("\u786E\u8BA4");function Je(e,t,l,_,n,i){const u=p("el-input"),h=p("el-button"),f=p("el-dialog");return c(),k(f,{modelValue:n.visible,"onUpdate:modelValue":t[12]||(t[12]=s=>n.visible=s),title:n.isNew?"\u65B0\u5EFA\u5468\u62A5":"\u7F16\u8F91\u5468\u62A5",fullscreen:""},{footer:a(()=>[r(h,{plain:"",onClick:t[11]||(t[11]=s=>n.visible=!1)},{default:a(()=>[Ae]),_:1}),r(h,{type:"primary",loading:n.loading,onClick:i.handleSubmit},{default:a(()=>[qe]),_:1},8,["loading","onClick"])]),default:a(()=>[r(u,{modelValue:n.name,"onUpdate:modelValue":t[0]||(t[0]=s=>n.name=s),placeholder:"\u8BF7\u8F93\u5165\u4F60\u7684\u540D\u5B57"},null,8,["modelValue"]),Ie,o("div",Ve,[o("div",xe,[r(u,{modelValue:n.planNumber,"onUpdate:modelValue":t[1]||(t[1]=s=>n.planNumber=s),type:"number"},{prepend:a(()=>[Pe]),_:1},8,["modelValue"])]),o("div",Re,[r(u,{modelValue:n.realNumber,"onUpdate:modelValue":t[2]||(t[2]=s=>n.realNumber=s),type:"number"},{prepend:a(()=>[Se]),_:1},8,["modelValue"])]),o("div",We,[r(u,{modelValue:n.deployNumber,"onUpdate:modelValue":t[3]||(t[3]=s=>n.deployNumber=s),type:"number"},{prepend:a(()=>[Le]),_:1},8,["modelValue"])])]),Ce,o("div",Ue,[o("div",Me,[r(u,{modelValue:n.bugNumber,"onUpdate:modelValue":t[4]||(t[4]=s=>n.bugNumber=s),type:"number"},{prepend:a(()=>[Be]),_:1},8,["modelValue"])]),o("div",De,[r(u,{modelValue:n.onlineNumber,"onUpdate:modelValue":t[5]||(t[5]=s=>n.onlineNumber=s),type:"number"},{prepend:a(()=>[Fe]),_:1},8,["modelValue"])]),o("div",Te,[r(u,{modelValue:n.solveNumber,"onUpdate:modelValue":t[6]||(t[6]=s=>n.solveNumber=s),type:"number"},{prepend:a(()=>[Ee]),_:1},8,["modelValue"])])]),He,r(u,{type:"textarea",class:"work-input",modelValue:n.worksInPlan,"onUpdate:modelValue":t[7]||(t[7]=s=>n.worksInPlan=s)},null,8,["modelValue"]),Oe,r(u,{type:"textarea",class:"work-input",modelValue:n.worksNotInPlan,"onUpdate:modelValue":t[8]||(t[8]=s=>n.worksNotInPlan=s)},null,8,["modelValue"]),Ye,r(u,{type:"textarea",class:"work-input",modelValue:n.worksInNextWeek,"onUpdate:modelValue":t[9]||(t[9]=s=>n.worksInNextWeek=s)},null,8,["modelValue"]),je,r(u,{type:"textarea",modelValue:n.tips,"onUpdate:modelValue":t[10]||(t[10]=s=>n.tips=s)},null,8,["modelValue"])]),_:1},8,["modelValue","title"])}var Ke=x(ve,[["render",Je]]);const ze={components:{CardInfo:we,WeeklyReport:Ke},data(){return{loading:null,laodingFlag:!0,week:"",weekList:[],list:[]}},created(){this.getWeeklyDate()},methods:{async getWeeklyDate(){this.loading=this.$loading(),this.loadingFlag=!0;try{const e=await Q()||[];e.sort((t,l)=>new Date(l)-new Date(t)),this.weekList=e,this.week=this.weekList.length?this.weekList[0]:"",this.week&&this.getReportByWeek()}catch(e){this.loading.close(),this.loadingFlag=!1,this.$message({type:"error",message:e}),console.error(e)}},async getReportByWeek(){this.loadingFlag||(this.loading=this.$loading(),this.loadingFlag=!0);try{const e=await X(this.week)||[];this.list=e,this.list.length||this.$message({type:"info",message:"\u6682\u65E0\u6570\u636E"})}catch(e){this.list=[],this.$message({type:"error",message:e}),console.error(e)}finally{this.loading.close(),this.loadingFlag=!1}},createReport(){this.$refs.weeklyReport.createReport()},editReport(e){this.$refs.weeklyReport.editReport(JSON.parse(JSON.stringify(e)))}}},Ge=y("\u65B0\u5EFA\u5468\u62A5");function Qe(e,t,l,_,n,i){const u=p("el-date-picker"),h=p("el-button"),f=p("el-aside"),s=p("el-empty"),w=p("card-info"),P=p("el-main"),B=p("el-link"),D=p("weekly-report"),F=p("el-container");return c(),k(F,null,{default:a(()=>[r(f,{class:"scrollbar buttons",width:"240px"},{default:a(()=>[r(u,{modelValue:n.week,"onUpdate:modelValue":t[0]||(t[0]=d=>n.week=d),type:"week",format:"YYYY-MM-DD \u7B2Cww\u5468","value-format":"YYYY-MM-DD",placeholder:"Pick a week",clearable:!1,onChange:i.getReportByWeek},null,8,["modelValue","onChange"]),r(h,{plain:"",onClick:i.createReport,disabled:!n.week},{default:a(()=>[Ge]),_:1},8,["onClick","disabled"])]),_:1}),r(P,{class:"scrollbar"},{default:a(()=>[!n.list.length&&!e.loadingFlag?(c(),k(s,{key:0,description:"\u6682\u65E0\u6570\u636E"})):I("",!0),(c(!0),g(U,null,C(n.list,(d,v)=>(c(),k(w,{key:v,"report-id":d.id,name:d.name,"plan-number":d.planNumber,"real-number":d.realNumber,"deploy-number":d.deployNumber,"bug-number":d.bugNumber,"online-number":d.onlineNumber,"solve-number":d.solveNumber,"works-in-plan":d.worksInPlan,"works-not-in-plan":d.worksNotInPlan,"works-in-next-week":d.worksInNextWeek,tips:d.tips,onEdit:Ze=>i.editReport(d),onRefresh:i.getReportByWeek},null,8,["report-id","name","plan-number","real-number","deploy-number","bug-number","online-number","solve-number","works-in-plan","works-not-in-plan","works-in-next-week","tips","onEdit","onRefresh"]))),128))]),_:1}),r(f,{class:"scrollbar",width:"150px"},{default:a(()=>[(c(!0),g(U,null,C(n.list,(d,v)=>(c(),g("div",{key:v,class:"link"},[r(B,{type:"default",underline:!1,href:`#${d.name}`},{default:a(()=>[y(m(d.name),1)]),_:2},1032,["href"])]))),128))]),_:1}),r(D,{ref:"weeklyReport",week:n.week,onRefresh:i.getReportByWeek},null,8,["week","onRefresh"])]),_:1})}var Xe=x(ze,[["render",Qe],["__scopeId","data-v-71d4776e"]]);const M=J(Xe);for(const e in V)if(Reflect.has(V,e)){const t=V[e];M.component(e,t)}M.use(K).mount("#app");
